# A OrientDB-based store for Quartz.

This is a OrientDB-backed job store for the [Quartz scheduler](http://quartz-scheduler.org/).


## Usage

Set your Quartz properties to something like this:

    # Use the MongoDB store
    org.quartz.jobStore.classpaces=io.smartspaces.scheduling.quartz.orientdb.OrientDBJobStore
    # MongoDB URI (optional if 'org.quartz.jobStore.addresses' is set)
    org.quartz.jobStore.mongoUri=mongodb://localhost:27020
    # comma separated list of mongodb hosts/replica set seeds (optional if 'org.quartz.jobStore.mongoUri' is set)
    org.quartz.jobStore.addresses=host1,host2
    # database name
    org.quartz.jobStore.dbName=quartz
    # Will be used to create collections like mycol_jobs, mycol_triggers, mycol_calendars, mycol_locks
    org.quartz.jobStore.collectionPrefix=mycol
    # thread count setting is ignored by the MongoDB store but Quartz requries it
    org.quartz.threadPool.threadCount=1


## Clustering

To enable clustering set the following property:

    # turn clustering on:
    org.quartz.jobStore.isClustered=true
    
    # Must be unique for each node or AUTO to use autogenerated:
    org.quartz.scheduler.instanceId=AUTO
    # org.quartz.scheduler.instanceId=node1
    
    # The same cluster name on each node:
    org.quartz.scheduler.instanceName=clusterName
    
Each node in a cluster must have the same properties, except *instanceId*.
To setup other clusters use different collection prefix:

    org.quartz.scheduler.collectionPrefix=yourCluster

Different time settings for cluster operations:

    # Frequency (in milliseconds) at which this instance checks-in to cluster.
    # Affects the rate of detecting failed instances.
    # Defaults to 7500 ms.
    org.quartz.scheduler.clusterCheckinInterval=10000
    
    # Time in millis after which a trigger can be considered as expired.
    # Defaults to 10 minutes:
    org.quartz.scheduler.triggerTimeoutMillis=1200000
    
    # Time in millis after which a job can be considered as expired.
    # Defaults to 10 minutes:
    org.quartz.scheduler.jobTimeoutMillis=1200000
    
    # Time limit in millis after which a trigger should be treated as misfired.
    # Defaults to 5000 ms.
    org.quartz.scheduler.misfireThreshold=10000
    
    # WriteConcern timeout in millis when writing in Replica Set.
    # Defaults to 5000 ms.
    org.quartz.scheduler.mongoOptionWriteConcernTimeoutMillis=10000


## Copyright & License

(c) Keith M. Hughes, 2016.

[Apache Public License 2.0](http://www.apache.org/licenses/LICENSE-2.0.html)

Forked from code (c) Michael S. Klishin, Alex Petrov, 2011-2015.
Forked from code from MuleSoft.


## FAQ

### Project Origins

The project was originally started by MuleSoft to support MongoDB. It was then forked by Michael S. Klishin and Alex Petrov to support all Quartz trigger types and tries to be as feature complete as possible for MongoDB. An OrientDB Quartz JobStore was needed for OrientDB and the basic concepts of OrientDB are close to MongoDB to start from MongoDB code.
